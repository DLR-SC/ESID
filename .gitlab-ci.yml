# ! PLEASE NOTE THAT THIS IS ONLY FOR INTERNAL USE AND THE FILE IS UPLOADED ON GITHUB FOR CONVENIENCE

# The bellow pipeline allows to build and deploy the website automatically, whenever developer pushes code to the application.
# The building stage uses a predefined docker image to improve performance.

stages:
  - docker

ubuntu:publish-esid-nginx-image:
  stage: docker
  tags:
    - shell
  script:
    - cd frontend
    - echo $ARTIFACTORY_TOKEN | docker login $ARTIFACT_STORE -u $ARTIFACTORY_USER --password-stdin
    - docker image build -t $ARTIFACT_STORE/esid:nginx-latest .
    - docker push $ARTIFACT_STORE/esid:nginx-latest
